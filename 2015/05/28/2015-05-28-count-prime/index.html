<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="PIPICOLD" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>leetcode, count prime数素数 - PIPICOLD</title><link rel="stylesheet" href="/css/main.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="head"><h1 class="head-title u-fl"><a href="/">PIPICOLD</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/archives" class="head-nav__link">Archives</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2015-05-27T22:00:00.000Z" class="post__time">May 28, 2015</time><h1 class="post__title"><a href="/2015/05/28/2015-05-28-count-prime/">leetcode, count prime数素数</a></h1></header><div class="post__main echo"><p>在看之前没写完的一题</p>
<blockquote>
<p>Count Primes </p>
<p>Description:<br>Count the number of prime numbers less than a non-negative number, n.</p>
<p>Credits:<br>Special thanks to @mithmatt for adding this problem and creating all test cases.</p>
</blockquote>
<p>自己先先写了一个解法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">countPrimes</span><span class="params">(self, n)</span>:</span></div><div class="line">        i=<span class="number">0</span></div><div class="line">        flag=<span class="number">0</span></div><div class="line">        <span class="keyword">for</span> val <span class="keyword">in</span> range(<span class="number">0</span>,n):</div><div class="line">            <span class="keyword">if</span> self.is_prime(val):</div><div class="line">                i=i+<span class="number">1</span></div><div class="line">        <span class="keyword">return</span> i;</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_prime</span><span class="params">(self,n)</span>:</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>, n):</div><div class="line">            <span class="keyword">if</span> n % i == <span class="number">0</span>:</div><div class="line">                <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">True</span></div></pre></td></tr></table></figure>
<p>这样的话会超时, 因为时间复杂度是O(n2)<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Submission Result: Time Limit Exceeded</div><div class="line">       Last executed input:</div><div class="line">               	499979</div></pre></td></tr></table></figure></p>
<p> 听了同事的意见, 用求根号来解决</p>
<blockquote>
<p>如果n不是素数 n=a<em>b (n&gt;a&gt;1 n&gt;b&gt;1)<br>那么 a 和 b一定有一个不超过根号n [否则 n=a</em>b&gt;(根号n)*(根号n)=n,矛盾]<br>于是只要除到根号n就可以判断是否是素数</p>
</blockquote>
<p>后来google了一个更加棒的</p>
<p>(<a href="http://bookshadow.com/weblog/2015/04/27/leetcode-count-primes/" target="_blank" rel="external">http://bookshadow.com/weblog/2015/04/27/leetcode-count-primes/</a>)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></div><div class="line">    <span class="comment"># @param &#123;integer&#125; n</span></div><div class="line">    <span class="comment"># @return &#123;integer&#125;</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countPrimes</span><span class="params">(self, n)</span>:</span></div><div class="line">        isPrime = [<span class="keyword">True</span>] * max(n, <span class="number">2</span>)</div><div class="line">        isPrime[<span class="number">0</span>], isPrime[<span class="number">1</span>] = <span class="keyword">False</span>, <span class="keyword">False</span></div><div class="line">        x = <span class="number">2</span></div><div class="line">        <span class="keyword">while</span> x * x &lt; n:</div><div class="line">            <span class="keyword">if</span> isPrime[x]:</div><div class="line">                p = x * x</div><div class="line">                <span class="keyword">while</span> p &lt; n:</div><div class="line">                    isPrime[p] = <span class="keyword">False</span></div><div class="line">                    p += x</div><div class="line">            x += <span class="number">1</span></div><div class="line">        <span class="keyword">return</span> sum(isPrime)</div></pre></td></tr></table></figure>
<p>他结合了根号 和 那个筛选法, </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">while</span> x*x &lt; n:</div></pre></td></tr></table></figure>
<p>这一句限制了他在根号内取值, 因为最多x取到 sqrt(n)</p>
<p>然后用一个列表 存储了 筛选的结果</p>
</div><footer class="post__foot u-cf"><a href="/2015/05/28/2015-05-28-count-prime/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2016 Dongmin Wu</div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/2015/05/28/2015-05-28-new-boring-day/" class="page-menu__link icon-arrow-left"></a></li><li class="page-menu__item"><a title="Next" href="/2015/05/28/2015-05-28-deleteDuplicates/" class="page-menu__link icon-arrow-right"></a></li></menu></footer></body></html>