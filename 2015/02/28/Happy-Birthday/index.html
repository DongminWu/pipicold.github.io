<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="The blog of myself"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="PIPICOLD" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>Linux学习笔记1 - PIPICOLD</title><link rel="stylesheet" href="/css/main.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="head"><h1 class="head-title u-fl"><a href="/">PIPICOLD</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/archives" class="head-nav__link">Archives</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2015-02-28T10:14:00.000Z" class="post__time">February 28, 2015</time><h1 class="post__title"><a href="/2015/02/28/Happy-Birthday/">Linux学习笔记1</a></h1></header><div class="post__main echo"><p>这两天都在配置编译服务器,</p>
<h3 id="1-服务器的IP地址的问题"><a href="#1-服务器的IP地址的问题" class="headerlink" title="1. 服务器的IP地址的问题"></a>1. 服务器的IP地址的问题</h3><p>虚拟机的IP地址的问题搞定了.<br>修改/etc/sysconfig/network-scripts/ifcfg-ens32</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">TYPE=&quot;Ethernet&quot;</div><div class="line">BOOTPROTO=&quot;static&quot;</div><div class="line">DEFROUTE=&quot;yes&quot;</div><div class="line">IPV4_FAILURE_FATAL=&quot;no&quot;</div><div class="line">IPV6INIT=&quot;yes&quot;</div><div class="line">IPV6_AUTOCONF=&quot;yes&quot;</div><div class="line">IPV6_DEFROUTE=&quot;yes&quot;</div><div class="line">IPV6_FAILURE_FATAL=&quot;no&quot;</div><div class="line">NAME=&quot;ens32&quot;</div><div class="line">UUID=&quot;476287bc-8643-404f-984e-8fd719a2832f&quot;</div><div class="line">ONBOOT=&quot;yes&quot;</div><div class="line">HWADDR=&quot;00:50:56:8C:6E:82&quot;</div><div class="line">PEERDNS=&quot;yes&quot;</div><div class="line">PEERROUTES=&quot;yes&quot;</div><div class="line">IPV6_PEERDNS=&quot;yes&quot;</div><div class="line">IPV6_PEERROUTES=&quot;yes&quot;</div><div class="line">IPADDR=10.79.183.125</div><div class="line">NETMASK=255.255.255.0</div><div class="line">GATEWAY=10.79.183.1</div></pre></td></tr></table></figure>
<p>又遇到了一个dns的问题</p>
<p>在这个文件里面还需要添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">DNS1=&quot;64.104.123.144&quot;</div><div class="line">DNS2=&quot;171.70.168.183&quot;</div></pre></td></tr></table></figure>
<h3 id="2-Sudo权限设置"><a href="#2-Sudo权限设置" class="headerlink" title="2. Sudo权限设置."></a>2. Sudo权限设置.</h3><p>主要是看了一个blog <a href="https://www.digitalocean.com/community/tutorials/how-to-edit-the-sudoers-file-on-ubuntu-and-centos" target="_blank" rel="external">How To Edit the Sudoers File on Ubuntu and CentOS</a></p>
<p>/etc/sudoers里面  </p>
<p><code>root        ALL=(ALL:ALL) ALL</code></p>
<p>这一行下面添加</p>
<p><code>demo        ALL=(ALL:ALL) ALL</code></p>
<p>就ok</p>
<h3 id="3-64位系统的交叉编译环境-arm-linux-gcc-不能使用的问题"><a href="#3-64位系统的交叉编译环境-arm-linux-gcc-不能使用的问题" class="headerlink" title="3. 64位系统的交叉编译环境 arm-linux-gcc 不能使用的问题."></a>3. 64位系统的交叉编译环境 arm-linux-gcc 不能使用的问题.</h3><p>有两个库找不到, <code>libz.so.1</code>和<code>ld-linux.so.2</code></p>
<p>google了一下, 问题是出在这个服务器是64位的, 有些32位的lib没有</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">yum install glibc.i686</div><div class="line">yum install zlib.i686</div></pre></td></tr></table></figure>
<h3 id="4-fedora-设置环境变量"><a href="#4-fedora-设置环境变量" class="headerlink" title="4. fedora 设置环境变量"></a>4. fedora 设置环境变量</h3><p>修改/etc/profile文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">PATH=/opt/tool:$PATH</div><div class="line">export PATH</div></pre></td></tr></table></figure>
<p>立即执行 环境变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">. /etc/profile</div></pre></td></tr></table></figure>
<p>注意 点 <code>.</code> 和 <code>/</code> 之间有个空格</p>
<h3 id="5-tftp-Server-on-Fedora-21"><a href="#5-tftp-Server-on-Fedora-21" class="headerlink" title="5. tftp Server on Fedora 21"></a>5. tftp Server on Fedora 21</h3><p>这个弄了我好久.</p>
<p>tftpServer的本质是用tftpd来作为server</p>
<p>但是可以用不同的服务来启动.</p>
<p>Fedora 18的文档是这样写的.</p>
<p>&gt;<br>On the DHCP server, verify that the tftp-server package is installed with the command rpm -q tftp-server.<br>tftp is an xinetd-based service. Configure xinetd to process tftp requests by editing /etc/xinetd.d/tftp so that disable = no.<br>Start the tftp service with the following commands:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">systemctl start xinetd.service</div><div class="line">systemctl enable xinetd.service</div></pre></td></tr></table></figure></p>
<p>These commands configure the tftp and xinetd services to immediately turn on and also configure them to start at boot.</p>
<p>但是到了Fedora 21的文档就变成了</p>
<p>&gt;</p>
<ol>
<li>Install the tftp server package.<br> yum install tftp-server</li>
<li>Start and enable the tftp socket. systemd will automatically start the tftpd service when required.<br> systemctl start tftp.socket<br> systemctl enable tftp.socket</li>
</ol>
<p>恩其实是两个不同的服务调用了同一个程序: /usr/sbin/in.tftpd</p>
<p>这个程序的帮助: man in.tftpd</p>
<h4 id="xinet"><a href="#xinet" class="headerlink" title="xinet"></a>xinet</h4><p>配置文件位置: /etc/xinet.d/tftp   没有的话就自己建立一个<br>配置如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">service tftp</div><div class="line">&#123;</div><div class="line">	disable		=	no</div><div class="line">	socket_type	=	dgram</div><div class="line">	protocol	=	udp</div><div class="line">	wait		=	yes</div><div class="line">	user		=	root</div><div class="line">	server		=	/usr/sbin/in.tftpd</div><div class="line">	server_args	=	-s /tftpboot</div><div class="line">	per_source	=	11</div><div class="line">	csp		    =	100 2</div><div class="line">	flags		=	IPv4</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意的是:</p>
<ol>
<li>server_args 这一项是 in.tftpd的参数, 意思是把/tftpboot作为根目录</li>
<li>flags=IPv4是采用IPv4的端口,否则默认用的是IPv6的.</li>
</ol>
<h5 id="tftp-service-tftp-socket"><a href="#tftp-service-tftp-socket" class="headerlink" title="tftp.service / tftp.socket"></a>tftp.service / tftp.socket</h5><p>配置文件位置: <code>/usr/lib/systemd/system/tftp.service</code><br>内容:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[Unit]</div><div class="line">Description=Tftp Server</div><div class="line">Requires=tftp.socket</div><div class="line">Documentation=man:in.tftpd</div><div class="line"></div><div class="line">[Service]</div><div class="line">ExecStart=/usr/sbin/in.tftpd -s /tftpboot</div><div class="line">StandardInput=socket</div><div class="line"></div><div class="line">[Install]</div><div class="line">Also=tftp.socket</div></pre></td></tr></table></figure>
<p>IPV4的配置在 <code>/usr/lib/systemd/system/tftp.service</code><br>要配置成这样:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[Unit]</div><div class="line">Description=Tftp Server Activation Socket</div><div class="line"></div><div class="line">[Socket]</div><div class="line">ListenDatagram=0.0.0.0:69</div><div class="line"></div><div class="line">[Install]</div><div class="line">WantedBy=sockets.target</div></pre></td></tr></table></figure>
<p>重要的是ListenDatagram这一项</p>
<p><strong>配置成功!!!!</strong></p>
<p>要把selinux配置成自由模式(放纵模式?)</p>
<p><code>setenforce 0</code></p>
<p>linux的帮助这样写的</p>
<p>&gt;<br>setenforce(8)                               SELinux Command Line documentation                              setenforce(8)<br>NAME<br>       setenforce - modify the mode SELinux is running in<br>SYNOPSIS<br>       setenforce [Enforcing|Permissive|1|0]<br>DESCRIPTION<br>       Use Enforcing or 1 to put SELinux in enforcing mode.<br>       Use Permissive or 0 to put SELinux in permissive mode.<br>       If  SELinux  is  disabled  and you want to enable it, or SELinux is enabled and you want to disable it, please see<br>       selinux(8).<br>AUTHOR<br>       Dan Walsh, <a href="&#109;&#x61;&#105;&#108;&#x74;&#111;&#x3a;&#x64;&#x77;&#97;&#x6c;&#115;&#104;&#64;&#x72;&#x65;&#x64;&#x68;&#97;&#116;&#x2e;&#99;&#111;&#x6d;">&#x64;&#x77;&#97;&#x6c;&#115;&#104;&#64;&#x72;&#x65;&#x64;&#x68;&#97;&#116;&#x2e;&#99;&#111;&#x6d;</a><br>SEE ALSO<br>       selinux(8), getenforce(8), selinuxenabled(8)<br>dwalsh@redhat.com                                      7 April 2004                                         setenforce(8)</p>
<h5 id="查看SELinux状态："><a href="#查看SELinux状态：" class="headerlink" title="查看SELinux状态："></a>查看SELinux状态：</h5><p>1、/usr/sbin/sestatus -v      ##如果SELinux status参数为enabled即为开启状态</p>
<p>SELinux status:                 enabled</p>
<p>2、getenforce                 ##也可以用这个命令检查</p>
<h5 id="关闭SELinux："><a href="#关闭SELinux：" class="headerlink" title="关闭SELinux："></a>关闭SELinux：</h5><p>1、临时关闭（不用重启机器）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">setenforce 0                  <span class="comment">##设置SELinux 成为permissive模式</span></div><div class="line"></div><div class="line">                              <span class="comment">##setenforce 1 设置SELinux 成为enforcing模式</span></div></pre></td></tr></table></figure>
<p>2、修改配置文件需要重启机器：</p>
<p>修改/etc/selinux/config 文件</p>
<p>将SELINUX=enforcing改为SELINUX=disabled</p>
<h4 id="服务的启动"><a href="#服务的启动" class="headerlink" title="服务的启动"></a>服务的启动</h4><p>命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">systemctl status xinetd.service  //查看状态</div><div class="line"></div><div class="line">systemctl start xinetd.service   //启动</div><div class="line"></div><div class="line">systemctl stop xinetd.service    //停止</div><div class="line"></div><div class="line">systemctl restart xinetd.service //重启</div><div class="line"></div><div class="line">systemctl enable xinetd.service  //开机自启动</div></pre></td></tr></table></figure>
<h4 id="Samba-服务"><a href="#Samba-服务" class="headerlink" title="Samba 服务"></a>Samba 服务</h4><p><a href="http://docs.fedoraproject.org/en-US/Fedora/21/html/System_Administrators_Guide/ch-File_and_Print_Servers.html#samba-rgs-overview" target="_blank" rel="external">Fedora Samba配置文档</a></p>
<p><strong>1. 改/etc/samba/smb.conf 文件</strong></p>
<p>在最下面加上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[dongmwu]</div><div class="line">path = /home/dongmwu</div><div class="line">writeable = yes</div><div class="line">public = yes</div><div class="line">guest ok = no</div></pre></td></tr></table></figure>
<p><strong>2. 设置密码</strong></p>
<p><code>smbpasswd -a username</code></p>
<p><strong>3. 重启samba服务</strong></p>
<p><code>systemctl restart smb.service</code></p>
<p><strong>4. 记住关防火墙!!!</strong></p>
<p><code>systemctl stop firewalld.service</code></p>
</div><footer class="post__foot u-cf"><a href="/2015/02/28/Happy-Birthday/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2016 Dongmin Wu</div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/2015/03/04/Liunx-command-one/" class="page-menu__link icon-arrow-left"></a></li><li class="page-menu__item"><a title="Next" href="/2015/02/17/Linux-Driver-Study/" class="page-menu__link icon-arrow-right"></a></li></menu></footer></body></html>