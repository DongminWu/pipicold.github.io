<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="The blog of myself"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="PIPICOLD" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>PIPICOLD</title><link rel="stylesheet" href="/css/main.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="head"><h1 class="head-title u-fl"><a href="/">PIPICOLD</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/archives" class="head-nav__link">Archives</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2016-03-16T23:00:00.000Z" class="post__time">March 17, 2016</time><h1 class="post__title"><a href="/2016/03/17/Linux-Device-Tree-Study/">Some notes about Linux Device Tree</a></h1></header><div class="post__main echo"><h1 id="Part-1-Kernel-相关文档"><a href="#Part-1-Kernel-相关文档" class="headerlink" title="Part 1 Kernel 相关文档"></a>Part 1 Kernel 相关文档</h1><p>找到kernel的这个文档:</p>
<p><a href="">https://www.kernel.org/doc/Documentation/devicetree/bindings/mtd/partition.txt</a></p>
<p>这里面说的很清楚怎么给nand分区</p>
<h1 id="Part-2-关于-address-cells-size-cells-是什么意思"><a href="#Part-2-关于-address-cells-size-cells-是什么意思" class="headerlink" title="Part 2 关于 address-cells, size-cells 是什么意思"></a>Part 2 关于 address-cells, size-cells 是什么意思</h1><p>这得从 <code>reg</code> 字串开始说起,</p>
<p> <code>reg</code> 字串其实就是一个用来存某个空间的首地址和空间大小的存储器</p>
<p>但是呢, 受制于32bits的兼容问题, 所以首地址和空间大小必须以8byte=32bits的大小来存储</p>
<p>这就像英美数字表示法里面的逗号comma, 如果是999以下的数字用英美数字表示法就是纯粹的999, 但是大于等于1000的数字, 用英美数字表示法就变成了”1,000”.</p>
<p>这就可以说是在英美数字表示法里面用3位的10进制作为单位存储一个大数字.</p>
<p>类比在 Linux device tree里面, 它用 8位的16进制(=32位的二进制)作为单位存储一个大数字.</p>
<p>比如我们要表达一个8GB的数字, 十进制的8GB = 0x100000000 (8个0) , 用device tree 的表达方法就是应该为 8GB = 0x1 0x00000000</p>
<p>这样问题又来了, 作为程序, 我怎么知道一串数字 <0x1 0x00000001="" 0x1000000=""></0x1></p>
<p>哪一部分是空间首地址, 哪一部分是空间大小呢?</p>
<p>所以, 就有了 <code>#address-cells</code> , 和 <code>#size-cells</code> 这两个字段</p>
<p>这两个东西都是用来描述 <code>reg</code> 这个字串的, 他们描述了, 在描述首地址或者是空间大小时,使用了多少个8bytes 字符</p>
<p>举个栗子</p>
<p><img src="/img/2016-03-17/1.png" alt="example"></p>
<p>这个是kernel文档里面关于flash分区的一段描述</p>
<p>这个flash的分区里面的 #address-cell =1, #size-cells=2 所以, 在他的 <code>reg</code> 字段里面, 第一个8bytes 字符表示的是这个分区的起始地址, 第二和第三个8bytes字符表示的是这个分区的大小</p>
<p>关于一些其他的知识, 在kernel的文档里面说的很清楚: <a href="https://www.kernel.org/doc/Documentation/devicetree/booting-without-of.txt" target="_blank" rel="external">https://www.kernel.org/doc/Documentation/devicetree/booting-without-of.txt</a></p>
<blockquote>
<p>In general, the format of an address for a device is defined by the parent bus type, based on the <code>#address-cells</code> and <code>#size-cells</code> properties.  Note that the parent’s parent definitions of <code>#address-cells</code> and <code>#size-cells</code> are not inherited so every node with children must specify them.  The kernel requires the root node to have those properties defining addresses format for devices directly mapped on the processor bus.</p>
<p>Pasted from <a href="https://www.kernel.org/doc/Documentation/devicetree/booting-without-of.txt" target="_blank" rel="external">https://www.kernel.org/doc/Documentation/devicetree/booting-without-of.txt</a> </p>
</blockquote>
<p>另外这里提到的OF, 也就是Open Firmware, <a href="https://en.wikipedia.org/wiki/Open_Firmware" target="_blank" rel="external">https://en.wikipedia.org/wiki/Open_Firmware</a></p>
<p>这个是基于PowerPC的一个bootloader啦</p>
<h1 id="Part-3-博通的NAND的device-tree的描述格式"><a href="#Part-3-博通的NAND的device-tree的描述格式" class="headerlink" title="Part 3 博通的NAND的device tree的描述格式"></a>Part 3 博通的NAND的device tree的描述格式</h1><p>在这里, 讲的很清楚, 连例子都有</p>
<p><a href="">https://www.kernel.org/doc/Documentation/devicetree/bindings/mtd/brcm,brcmnand.txt</a></p>
</div><footer class="post__foot u-cf"><a href="/2016/03/17/Linux-Device-Tree-Study/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2016-03-05T23:00:00.000Z" class="post__time">March 6, 2016</time><h1 class="post__title"><a href="/2016/03/06/Wince-Jenkins-Building/">Using Jenkins to Build Wince</a></h1></header><div class="post__main echo"><h1 id="Part-1-历史由来"><a href="#Part-1-历史由来" class="headerlink" title="Part 1 历史由来"></a>Part 1 历史由来</h1><p>好了, 这次让我们说中文, 就不瞎掰扯自己的垃圾英语水平了.</p>
<p>公司项目里面用的是Windows CE 5.0 嵌入式系统, 这是个非常老旧的操作系统, 没记错的话整个系统只能有32个用户进程, 每个进程还不能完整使用全部的虚拟内存地址.</p>
<p>关于这套系统: <a href="">https://en.wikipedia.org/wiki/Windows_CE</a></p>
<p>这套古老的系统我维护了一年了, 工作是维护HAL, 也就是硬件外设层的代码.</p>
<p>因为系统的古老所以一直以来这个项目的版本发布都是依赖于每个开发者自己编译和发布.</p>
<p>有个10年前的子项目的发布步骤繁琐到令人发指, 照着文档做都很难完全做对.</p>
<p>这样带来的问题可想而知, 去年我就因为发布的时候漏掉了一步导致被投诉…</p>
<p>做维护的事情就是很烦而且还要负责任.</p>
<p>那次事故之后, team里面就申请了一台服务器上的虚拟机用作专门版本发布.</p>
<p>我就在工作之余慢慢研究整个的工作流程怎么移植到这台专用机器上面.</p>
<h1 id="Part-2-Jenkins"><a href="#Part-2-Jenkins" class="headerlink" title="Part 2 Jenkins"></a>Part 2 Jenkins</h1><p>Jenkins, <a href="">http://jenkins-ci.org</a></p>
<p>这应该是一个主流的自动化编译服务器框架吧.官网上说他的好处如下:</p>
<blockquote>
<p>Jenkins offers the following major features out of the box, and many more can be added through plugins:</p>
<p>Easy installation: Just run java -jar jenkins.war, deploy it in a servlet container. No additional install, no database. Prefer an installer or native package? We have those as well.</p>
<p>Easy configuration: Jenkins can be configured entirely from its friendly web GUI with extensive on-the-fly error checks and inline help.</p>
<p>Rich plugin ecosystem: Jenkins integrates with virtually every SCM or build tool that exists. View plugins.</p>
<p>Extensibility: Most parts of Jenkins can be extended and modified, and it’s easy to create new Jenkins plugins. This allows you to customize Jenkins to your needs.</p>
<p>Distributed builds: Jenkins can distribute build/test loads to multiple computers with different operating systems. Building software for OS X, Linux, and Windows? No problem.</p>
</blockquote>
<p>在公司的项目中确实也有很多在用他来管理的, 所以大家的学习使用成本很低.</p>
<p>但是问题是这是第一次在WINCE, 或者说是windows平台上进行这种automation的工作.</p>
<p>宿主机器是Windows XP系统!</p>
<p>PS: WINDOWS不死, 程序员的世界永远不会更美好.</p>
<h1 id="Part-3-Jenkins-用户权限管理问题"><a href="#Part-3-Jenkins-用户权限管理问题" class="headerlink" title="Part 3 Jenkins 用户权限管理问题"></a>Part 3 Jenkins 用户权限管理问题</h1><p>这是安装Jenkins一开始就遇到的问题..</p>
<p>注册了一个编译用的账号然而权限不足, 我是用直接改 Jenkins目录下 <code>config.xml</code> 的方法解决的额.</p>
<p>可以参考这个: <a href="">http://www.cnblogs.com/gao241/archive/2013/03/20/2971416.html</a></p>
<p>关于怎么在Windows XP 下面重启Jenkins, 我机器上面的是以服务模式运行的, 所以用的方法是直接在 CMD里面 输入:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sc stop jenkins</div><div class="line">sc start jenkins</div></pre></td></tr></table></figure>
<p>就直接吧编译账号变为最高权限吧, 反正没几个人会用的.</p>
<h1 id="Part-4-Windows-CE-通常的编译方式"><a href="#Part-4-Windows-CE-通常的编译方式" class="headerlink" title="Part 4 Windows CE 通常的编译方式"></a>Part 4 Windows CE 通常的编译方式</h1><p>Wince的编译有两个模式, 一个是编译kernel, 第二个是编译应用,</p>
<p>因为有IDE的存在, 所以如果按照Wince 正常的工作模式, 编译也就是点两个按钮的问题.</p>
<p>但是因为我们发布的是库文件, 所以要用到命令行下的编译工具</p>
<p> <a href="https://msdn.microsoft.com/en-us/library/aa448614.aspx" target="_blank" rel="external">Build.exe</a></p>
<p> 但是通过先人传承下来的workflow, 我们需要</p>
<ol>
<li>将对应的硬件的 <a href="https://msdn.microsoft.com/en-us/library/ms901757.aspx" target="_blank" rel="external">BSP</a> 放到 <code>C:\WINCE500</code></li>
<li>打开IDE</li>
<li>通过IDE打开对应硬件平台的工程项目文件</li>
<li>点击菜单栏的 <code>Build Tools -&gt; Open Build Source</code></li>
<li>在弹出的命令行用<code>cd</code> 命令定位到我们项目的Git根目录</li>
<li>输入 <code>build -c</code> 编译</li>
</ol>
<p> 这需要极强的人工参与, 这也是为什么每次发版本效率极低</p>
<h1 id="Part-5-使用Windows-Batch-Command进行编译"><a href="#Part-5-使用Windows-Batch-Command进行编译" class="headerlink" title="Part 5 使用Windows Batch Command进行编译"></a>Part 5 使用Windows Batch Command进行编译</h1><p> 通过网上查找资料, 还有自己的对比, 发现其实</p>
<blockquote>
<p>点击菜单栏的 <code>Build Tools -&gt; Open Build Source</code></p>
</blockquote>
<p> 这一步弹出的窗口, 是一个已经预设过环境变量的CMD窗口而已,</p>
<p> 之所以能通过输入<code>build</code>命令, 调用Build.exe程序, 就是因为在这个窗口的<code>PATH</code>环境变量里面吧build.exe所在的目录包含了.</p>
<p> 所以通过使用<code>set</code>命令比对 原始的CMD窗口的环境变量 和从IDE里面打开的窗口的环境变量, 就能得到在编译时候的窗口环境了.</p>
<p> 经过试验, 这样做是可行的, 于是进行下一步</p>
<h1 id="Part-6-Python进行流程控制"><a href="#Part-6-Python进行流程控制" class="headerlink" title="Part 6 Python进行流程控制"></a>Part 6 Python进行流程控制</h1><p> 如果是单纯的编译就没那么麻烦了,</p>
<p> 但是发布版本还涉及到文件的移动拷贝, 还有打包的工作</p>
<p> 试图完全用Windows Batch Command 脚本来写整套逻辑的, 发现BAT脚本在逻辑处理上面真的是很糟糕, 于是就决定用python来进行一些逻辑层的处理</p>
<p> 写了一个auto.py脚本和几个作为实施者的BAT脚本.</p>
<p> 想到几个地方要注意的:</p>
<ol>
<li>必须要是同步的, 在实施者执行命令的时候必须等待, 否则会出编译错误</li>
<li><p>最好每一步打好时间戳, 方便调试</p>
<p>不得不承认这是我第一次用Python写工具类应用, 之前都是解一些算法题什么的所以功力不够.</p>
</li>
</ol>
<blockquote>
<p>必须要是同步的, 在实施者执行命令的时候必须等待, 否则会出编译错误</p>
</blockquote>
<p>这一个的解决方案是用 模块subprocess 的<code>Pipe.open()</code> 和 <code>Pipe.wait()</code> 实现的.</p>
<p>可以参考这里:</p>
<p><a href="http://www.aikaiyuan.com/4705.html" target="_blank" rel="external">小心subprocess的PIPE卡住你的python程序</a></p>
<p><a href="http://backend.blog.163.com/blog/static/2022941262014016710912/" target="_blank" rel="external">避免python Popen阻塞</a></p>
<blockquote>
<p>最好每一步打好时间戳, 方便调试</p>
</blockquote>
<p>这个就很简单的调用 time 模块就行了</p>
<p>教程: <a href="http://www.cnblogs.com/wanpython/archive/2010/08/07/1794598.html" target="_blank" rel="external">python 获取当前时间</a></p>
<h1 id="Part-7-SSH-的问题"><a href="#Part-7-SSH-的问题" class="headerlink" title="Part 7 SSH 的问题"></a>Part 7 SSH 的问题</h1><p>这个问题是在尝试吧 GIT 仓库管理的部分集成在 <code>auto.py</code> 里面的时候遇到的, 虽然现在把这一块的管理移出到使用Jenkins插件了, 但是还是可以记录一下.</p>
<p>ssh实现免密码登陆的话, 需要把私钥存在 <code>~/.ssh/id_rsa</code> 文件里面, 于是我可以用Git bash里面的小型的cygwin来运行这个 <code>auto.py</code> 并且把准备好的私钥文件copy到<code>~/.ssh/</code> 里面就好.</p>
<p>然后在Jenkins的 Jenkins设置里面, 把shell的路径指定到 <code>C:\Program Files\Git\bin\bash.exe</code> 也就是GIT bash的可执行文件, 这样Jenkins在执行shell 命令的时候就会调用我们配置过SSH 私钥的Terminal了.</p>
</div><footer class="post__foot u-cf"><a href="/2016/03/06/Wince-Jenkins-Building/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2016-03-04T23:00:00.000Z" class="post__time">March 5, 2016</time><h1 class="post__title"><a href="/2016/03/05/Study-React/">Study Notes of React Tutorial</a></h1></header><div class="post__main echo"><blockquote>
<p>The Link of React Tutorial: <a href="http://facebook.github.io/react/docs/tutorial.html" target="_blank" rel="external">http://facebook.github.io/react/docs/tutorial.html</a></p>
</blockquote>
<p>Above is the tutorial which told me that I need to setted up a node.js server</p>
<h2 id="About-installing-the-Node"><a href="#About-installing-the-Node" class="headerlink" title="About installing the Node"></a>About installing the Node</h2><p>npm install<br>node server.js<br>By the command above, I can start a Node.JS server on 127.0.0.1:3000</p>
<p>I have not used any node.js server anymore, so I searched some topic about what the “npm” it is.</p>
<p>The link of the usage of npm: <a href="http://www.tutorialspoint.com/nodejs/nodejs_npm.htm" target="_blank" rel="external">http://www.tutorialspoint.com/nodejs/nodejs_npm.htm</a></p>
<p>For my MAC, I use brew to install node.js, the command is:</p>
<p>brew install nodejs<br>The GIT repo address of my learning is: <a href="https://git.coding.net/pipicold/react-test.git" target="_blank" rel="external">https://git.coding.net/pipicold/react-test.git</a></p>
<h2 id="About-the-fundamental-knowledge"><a href="#About-the-fundamental-knowledge" class="headerlink" title="About the fundamental knowledge"></a>About the fundamental knowledge</h2><p>To create a React component: <code>React.createClass()</code></p>
<p>While creating a component, a important method is</p>
<p><code>render: ()</code></p>
<p>In this method, you can added some codes for when your component is firstly added.</p>
<p>You do not have to return basic HTML. You can return a tree of components that you (or someone else) built.</p>
<p><code>ReactDOM.render()</code> instantiates the root component, starts the framework, and injects the markup into a raw DOM element, provided as the second argument.</p>
<p><img src="/img/2016-03-05/1.png" alt="first render"></p>
<p>The class name of a component equals the name of the tag</p>
<p>example:</p>
<p>If I defined a class named “CommentBox” by the code:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> CommentBox = React.createClass();</div></pre></td></tr></table></figure>
<p>I should call this component by:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ReactDOM.render(        &lt;CommentBox /&gt;,        document.getElementById("content"))</div></pre></td></tr></table></figure>
<h2 id="Composing-Components"><a href="#Composing-Components" class="headerlink" title="Composing Components"></a>Composing Components</h2><p>I found that maybe React cannot divide the code into separated files</p>
<p>Firstly, I wrote 3 files</p>
<ol>
<li>tutorial2.js</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> CommentList = React.createClass(   </div><div class="line">    &#123;           </div><div class="line">        <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;         </div><div class="line">            <span class="keyword">return</span>(         </div><div class="line">               &lt;div className="commentList"&gt;     </div><div class="line">                    Hello, I am a CommentList      </div><div class="line">               &lt;/div&gt;        </div><div class="line">            );</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">);</div><div class="line"><span class="keyword">var</span> CommentForm = React.createClass(</div><div class="line">    &#123;            </div><div class="line">        <span class="attr">render</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;                </div><div class="line">            <span class="keyword">return</span>(                        </div><div class="line">                &lt;div className = "commentForm"&gt;                        </div><div class="line">                    Hey, I am a Comment Form                      </div><div class="line">                &lt;/div&gt;</div><div class="line">            );            </div><div class="line">        &#125;        </div><div class="line">    &#125;        </div><div class="line">);</div></pre></td></tr></table></figure>
<ol>
<li>tutorialall.js</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">var CommentBox = React.createClass(</div><div class="line">        &#123;</div><div class="line">render: function()&#123;                </div><div class="line">return (                        </div><div class="line">        //'className' means 'class' in standard HTML</div><div class="line">        &lt;div className = "commentBox"&gt;                        </div><div class="line">        Hello pipicold                        </div><div class="line">        &lt;h1&gt;Comments&lt;/h1&gt;</div><div class="line">        &lt;CommentList /&gt;                        </div><div class="line">        &lt;CommentForm /&gt;                        </div><div class="line">        &lt;/div&gt;                      </div><div class="line">       );  </div><div class="line">&#125;        </div><div class="line">&#125;        </div><div class="line">);</div><div class="line">ReactDOM.render(</div><div class="line">        &lt;CommentBox /&gt;,      </div><div class="line">        document.getElementById('content')        </div><div class="line">        );</div></pre></td></tr></table></figure>
<ol>
<li>index.html</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span>     <span class="tag">&lt;<span class="name">html</span>&gt;</span>  </div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>    </div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>React Tutorial<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="comment">&lt;!-- Not present in the tutorial. Just for basic styling. --&gt;</span>    </div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/base.css"</span> /&gt;</span>    </div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react.js"</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.js"</span>&gt;</span><span class="undefined"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>    </div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.15/browser.js"</span>&gt;</span><span class="undefined"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>    </div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js"</span>&gt;</span><span class="undefined"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>    </div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.5/marked.min.js"</span>&gt;</span><span class="undefined"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span>  </div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>    </div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span>    </div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/babel"</span> <span class="attr">src</span>=<span class="string">"scripts/tutorial2.js"</span>&gt;</span><span class="undefined"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>    </div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/babel"</span> <span class="attr">src</span>=<span class="string">"scripts/tutorialall.js"</span>&gt;</span><span class="undefined"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span> <span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>It will not work.</p>
<p>After I merged those two JS file into one, the page went to normal.</p>
<p>Using props</p>
<p>the braces seems to mean the call of properties</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"comment"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">className</span>=<span class="string">"commentAuthor"</span>&gt;</span></div><div class="line">&#123;this.props.author&#125;  </div><div class="line"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span>  </div><div class="line">&#123;this.props.children&#125;       </div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>what should be came up with is that the <code>{this.props.children}</code> means the elements between the tags: <code>&lt;Comment&gt; &lt;/Comment&gt;</code></p>
<h2 id="Component-Properties"><a href="#Component-Properties" class="headerlink" title="Component Properties"></a>Component Properties</h2><p>Pass the properties like original HTML</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">render: function()&#123;                </div><div class="line">    return(                        </div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"commentList"</span>&gt;</span>                        </div><div class="line">            <span class="tag">&lt;<span class="name">Comment</span> <span class="attr">author</span>=<span class="string">"Mrs. Wu"</span>&gt;</span> I do not like baby<span class="tag">&lt;/<span class="name">Comment</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Comment</span> <span class="attr">author</span>=<span class="string">"Mr. Wu"</span>&gt;</span> I don't like baby<span class="tag">&lt;/<span class="name">Comment</span>&gt;</span>  </div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          );            </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>By the way, I found that it is unimportant for the sequence of each Component, you can put a Component at any where but should before the line :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ReactDOM.render();</div></pre></td></tr></table></figure>
<p>Besides, you can use any characters between tags in JSX</p>
<p>The rendered page showed like follow:</p>
<p><img src="/img/2016-03-05/3.png" alt="first render"></p>
<h2 id="Adding-Markdown"><a href="#Adding-Markdown" class="headerlink" title="Adding Markdown"></a>Adding Markdown</h2><p><a href="http://facebook.github.io/react/docs/tutorial.html#adding-markdown" target="_blank" rel="external">http://facebook.github.io/react/docs/tutorial.html#adding-markdown</a></p>
<p>Marked is a external library wirtten in JS</p>
<p>offical usage in its github website: <a href="https://github.com/chjj/marked" target="_blank" rel="external">https://github.com/chjj/marked</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Marked in the browser<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lib/marked.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">'content'</span>).innerHTML =      marked(<span class="string">'# Marked in browser\n\nRendered by **marked**.'</span>);  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Whlie applying it to React, just us the braces to run your JS code</p>
<p>the content in the braces means the JS code, outside of that is the HTML part</p>
<p>besides, you cannot use “;” in the return, reason:</p>
<p><a href="http://blog.csdn.net/lihongxun945/article/details/45826851" target="_blank" rel="external">http://blog.csdn.net/lihongxun945/article/details/45826851</a></p>
<blockquote>
<p>因为 React.createElement(“div”, null, var a = 1;) 是语法错误。</p>
<p>那么你也可以理解为什么大括号中的js表达式不能有分号结尾了吧。</p>
<p>需要注意的是，如果你在属性中输出JS变量，是不能加引号的，不然会被当做字符串而不被解析。</p>
<p>应该是这样：</p>
</blockquote>
<p>the renderred page is like this:</p>
<p><img src="/img/2016-03-05/2.png" alt="first render"></p>
<p>according to the description of React’s tutorial</p>
<p>That’s React protecting you from an XSS attack. There’s a way to get around it but the framework warns you not to use it:</p>
<p>two steps:</p>
<ol>
<li>using html: tag</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">rawMarkup: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> rawMarkup = marked(<span class="keyword">this</span>.props.children.toString(), &#123;<span class="attr">sanitize</span>: <span class="literal">true</span>&#125;);</div><div class="line">    <span class="keyword">return</span> &#123; <span class="attr">__html</span>: rawMarkup &#125;;</div><div class="line">  &#125;,</div></pre></td></tr></table></figure>
<ol>
<li>using span tag</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;this.rawMarkup()&#125;</span> /&gt;</span></div></pre></td></tr></table></figure>
<p>caution! you must use comma to separate two functions</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> Comment = React.createClass(</div><div class="line">        &#123;</div><div class="line">            <span class="attr">rawMarkup</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span></div><div class="line">            &#123;</div><div class="line">                <span class="keyword">var</span> rawMarkup = marked( <span class="keyword">this</span>.props.children.toString(), &#123;<span class="attr">sanitize</span>:<span class="literal">true</span>&#125;);</div><div class="line">                <span class="keyword">return</span> &#123;<span class="attr">__html</span>: rawMarkup&#125;;</div><div class="line">            &#125;,<span class="comment">//be careful of this comma!!</span></div><div class="line">            render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="keyword">return</span>(</div><div class="line">                        <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"comment"</span>&gt;</span></span></div><div class="line">                            <span class="tag">&lt;<span class="name">h2</span> <span class="attr">className</span>=<span class="string">"commentAuthor"</span>&gt;</span></div><div class="line">                                &#123;this.props.author&#125;</div><div class="line">                            <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;this.rawMarkup()&#125;/</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                        );</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        );</div></pre></td></tr></table></figure>
<h2 id="Hook-up-the-data-model"><a href="#Hook-up-the-data-model" class="headerlink" title="Hook up the data model"></a>Hook up the data model</h2><p>It is so fun and free while using function in JavaScript:</p>
<p><a href="http://www.jb51.net/article/22742.htm" target="_blank" rel="external">http://www.jb51.net/article/22742.htm</a></p>
<p>再有一个值得说一下的，就是JS中的函数的参数不一定是严格匹配的，通常的编程经验，比如有这样一个函数 fun(aa,bb)，那么我们在调用这个函数的时候就应该给他传递两个参数。但是在JS中，我们可以给他传递任意个参数，1个，3个，等等，都可以。JS中的参数传递，不完全是按照函数声明时指定的那些参数，在每次调用函数的时候，都会有一个命名为arguments的数组，这个数组里面存储了函数调用时，传递进来的所有参数，有了它，我们甚至可以不再函数声明时指定形式参数</p>
<h2 id="Reactive-state"><a href="#Reactive-state" class="headerlink" title="Reactive state"></a>Reactive state</h2><p> To implement interactions, we introduce mutable state to the component. this.state is private to the component and can be changed by calling this.setState(). When the state updates, the component re-renders itself.</p>
<h2 id="Adding-new-comments"><a href="#Adding-new-comments" class="headerlink" title="Adding new comments"></a>Adding new comments</h2><p>it is so hard for me to debug in React, maybe I should find a way to debug it.</p>
<p>also, I was not so familir with the “function” of Javascript, I should learn about it</p>
<p>It is so tired for me, because it is already 1.30 am now…I must go to bed…</p>
<p>There is an extension for debuging React, on chrome.</p>
</div><footer class="post__foot u-cf"><a href="/2016/03/05/Study-React/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-06-17T22:00:00.000Z" class="post__time">June 18, 2015</time><h1 class="post__title"><a href="/2015/06/18/Nor-Flash-Learning/">学习一下norflash</a></h1></header><div class="post__main echo"><p>最近公司项目遇到了两个关于Nor Flash的问题, 于是就学习了一下NorFlash是怎么操作的.</p>
<p>项目的平台是博通(boardcom)的, 不过应该nor的操作是通用而相似的.</p>
<p>首先是找了一个特别好的文章 ===&gt; <a href="http://wiki.dzsc.com/info/5353.html" target="_blank" rel="external">Nor Flash</a></p>
<p>文章讲的很清楚, 接下来讲下遇到的问题</p>
<h3 id="1-flash设备的时序"><a href="#1-flash设备的时序" class="headerlink" title="1. flash设备的时序"></a>1. flash设备的时序</h3><blockquote>
<p>We have been able to track the problem and that’s caused by the fact that factory used slower flash devices on some production batch (100ns Vs 110ns).</p>
</blockquote>
<p>遇到的问题是工厂换了一块和现在的IO速度不同的Nor Flash. 然后让我们看看是不是能够修改一下我们这边的设定</p>
<p>发现了可以提供修改的寄存器</p>
<h3 id="2-查看新的Nor-Flash是否合适"><a href="#2-查看新的Nor-Flash是否合适" class="headerlink" title="2. 查看新的Nor Flash是否合适"></a>2. 查看新的Nor Flash是否合适</h3><p>用了两款新的Nor Flash, 但是不知道现有的代码是否支持?</p>
<p>主要的配置是有两种方式,</p>
<p>第一种方式, 是查询一个配置表, 里面把现在在产品上面用到的FLASH芯片的配置都列了出来</p>
<p>第二种方式, 是通过查询CFI信息, 获取芯片内部的配置, 关于CFI信息是什么东西</p>
<p>这里有份spansion的文档介绍  ====&gt; <a href="http://www.spansion.com/Support/Application%20Notes/Quick_Guide_to_CFI_AN.pdf" target="_blank" rel="external">Quick Guide to Common Flash Interface</a></p>
<p>然后还涉及到一个命令集的事情, 其实就是Nor 不仅仅有CFI命令, 还有自己的比如读数据, 写数据, 擦除数据的时候的指令集</p>
<p>之前提到的文章<a href="http://wiki.dzsc.com/info/5353.html" target="_blank" rel="external">Nor Flash</a>里面有详细的说法.</p>
<p>ok that is all</p>
</div><footer class="post__foot u-cf"><a href="/2015/06/18/Nor-Flash-Learning/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-06-06T22:00:00.000Z" class="post__time">June 7, 2015</time><h1 class="post__title"><a href="/2015/06/07/Construct-Binary-Tree-from-Preorder-and-Inorder-Traversal/"></a></h1></header><div class="post__main echo"><p>题目: </p>
<blockquote>
<p><strong>Construct Binary Tree from Preorder and Inorder Traversal</strong></p>
<p>Given preorder and inorder traversal of a tree, construct the binary tree.</p>
<p>Note:<br>You may assume that duplicates do not exist in the tree. </p>
</blockquote>
<p>首先是这个二叉树里面的值没有重复的才行.. </p>
<p>否则就怎么也解不出来的..</p>
<p>想了个思路:</p>
<p>比如有这样一个二叉树</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">    1</div><div class="line"></div><div class="line">   / \</div><div class="line"></div><div class="line">  2   3</div><div class="line"></div><div class="line"> / \   \</div><div class="line"></div><div class="line">4   5   9</div><div class="line"></div><div class="line">   / \</div><div class="line"></div><div class="line">  6   7</div><div class="line"></div><div class="line">       \</div><div class="line"></div><div class="line">        8</div></pre></td></tr></table></figure>
<p>他的先序遍历是:  <code>preorder = [1, 2, 4, 5, 6, 7, 8, 3, 9]</code></p>
<p>他的中序遍历是:  <code>in_order = [4, 2, 6, 5, 7, 8, 1, 3, 9]</code></p>
<p>能显而易见看出的是先序遍历的第一个元素永远是根节点..</p>
<p>但是根节点之后的一个数可能是左节点也可能是右节点</p>
<p>而中序遍历的列表里面 根节点<code>1</code> 左边(<code>4, 2, 6, 5, 7, 8</code>)的都是左子树的元素, 右边(<code>3, 9</code>)的都是右子树元素</p>
<p>所以我有了这样的假设</p>
<blockquote>
<p><strong>if</strong> 在in_order中的根节点位置的左边有数据 <strong>then</strong> preorder[1]是左子树的根节点</p>
<p><strong>if</strong> 在in_order中的根节点位置的右边有数据 <strong>then</strong> preorder[1]是右子树的根节点</p>
</blockquote>
<p>扩展一下</p>
<p>就变成了</p>
<blockquote>
<p><strong>if</strong> 在in_order中某个位置的左边有数据 <strong>then</strong> preorder[对应节点的索引+1]是左子树的根节点</p>
<p><strong>if</strong> 在in_order中某个位置的右边有数据 <strong>then</strong> preorder[对应节点的索引+1]是右子树的根节点</p>
</blockquote>
<p>反过来想, </p>
<p>以preorder为条件的话.</p>
<p>那么可以变为这个流程</p>
<ol>
<li><p>假设<code>preorder[index] == data</code></p>
</li>
<li><p>如果<code>preorder[]</code> 有未被读取过的数据(可能是这种情况 [ 读过, <strong>读过</strong>, 读过, 未读过]&lt;- 指针在第2个<strong>读过</strong>那里)</p>
</li>
<li><p>那么找到 <code>in_order[in_index] == data</code></p>
</li>
<li><p>如果<code>preorder[]</code> 的数据在 <code>in_order[in_index]</code> 左边</p>
</li>
<li><p>那么<code>preorder[]</code> 是<code>preorder[index]</code>的左节点</p>
</li>
<li><p>如果在右边就是右节点啦</p>
</li>
</ol>
<p>于是就可以递归上面的步骤, 直到in_order中的某个位置的数据两边都没有未被访问过数据, 也就是说是叶子节点</p>
<p>卧槽搞了3-4个小时..就为了实现这个逻辑..</p>
<p>终于尼玛A过了,,,看起来简单的算法实现起来真尼玛麻烦</p>
<p>主要问题出在 <code>hasZero()</code> 这个函数上面, 之前的实现是</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">hasZero</span><span class="params">(direct,search_list, index)</span>:</span></div><div class="line"></div><div class="line">           <span class="keyword">if</span> direct == <span class="string">"left"</span>:</div><div class="line"></div><div class="line">               <span class="keyword">try</span>:</div><div class="line"></div><div class="line">                   search_list[<span class="number">0</span>:index].index(<span class="number">0</span>)</div><div class="line"></div><div class="line">               <span class="keyword">except</span> ValueError:</div><div class="line"></div><div class="line">                   <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line"></div><div class="line">               <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line"></div><div class="line">           <span class="keyword">if</span> direct == <span class="string">"right"</span>:</div><div class="line"></div><div class="line">               <span class="keyword">try</span>:</div><div class="line"></div><div class="line">                   search_list[index:(len(search_list)<span class="number">-1</span>)].index(<span class="number">0</span>)</div><div class="line"></div><div class="line">               <span class="keyword">except</span> ValueError:</div><div class="line"></div><div class="line">                   <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line"></div><div class="line">               <span class="keyword">return</span> <span class="keyword">True</span></div></pre></td></tr></table></figure>
<p>这样的话只要<code>index</code>的左侧或者右侧有0</p>
<p>这个函数的返回值就是<code>True</code></p>
<p>不过我觉得我的实现好垃圾..</p>
<p>因为运行时间竟然到了916ms, 平均水平我觉得应该是200ms左右…</p>
<p>我的代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">buildTree</span><span class="params">(self, preorder, inorder)</span>:</span></div><div class="line">        <span class="function"><span class="keyword">def</span> <span class="title">hasZero</span><span class="params">(direct,search_list, index)</span>:</span></div><div class="line">            pointer= index</div><div class="line">            <span class="keyword">if</span> direct == <span class="string">"left"</span>:</div><div class="line">                <span class="keyword">if</span> index &lt;= <span class="number">0</span>:</div><div class="line">                    <span class="comment"># print "left False"</span></div><div class="line">                    <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">                pointer -= <span class="number">1</span></div><div class="line">                <span class="keyword">while</span> (pointer &gt;= <span class="number">0</span>):</div><div class="line">                    <span class="keyword">if</span> (search_list[pointer] == <span class="number">1</span> <span class="keyword">and</span> pointer &lt; index <span class="number">-1</span>):</div><div class="line">                        <span class="comment"># print "left True"</span></div><div class="line">                        <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">                    <span class="keyword">elif</span> (search_list[pointer] == <span class="number">1</span> <span class="keyword">and</span> pointer &gt;= index <span class="number">-1</span>):</div><div class="line">                        <span class="comment"># print "left False"</span></div><div class="line">                        <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">                    pointer -= <span class="number">1</span></div><div class="line">                <span class="keyword">else</span>:</div><div class="line">                    <span class="comment"># print "left True"</span></div><div class="line">                    <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">            <span class="keyword">if</span> direct == <span class="string">"right"</span>:</div><div class="line">                <span class="keyword">if</span> index &gt;= len(search_list)<span class="number">-1</span>:</div><div class="line">                    <span class="comment"># print "right False"</span></div><div class="line">                    <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">                pointer += <span class="number">1</span></div><div class="line">                <span class="keyword">while</span> (pointer &lt;= len(search_list)<span class="number">-1</span>):</div><div class="line">                    <span class="comment"># print pointer</span></div><div class="line">                    <span class="keyword">if</span> (search_list[pointer] == <span class="number">1</span> <span class="keyword">and</span> pointer &gt; index +<span class="number">1</span>):</div><div class="line">                        <span class="comment"># print "right True"</span></div><div class="line">                        <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">                    <span class="keyword">if</span> (search_list[pointer] == <span class="number">1</span> <span class="keyword">and</span> pointer &lt;= index +<span class="number">1</span>):</div><div class="line">                        <span class="comment"># print "right False"</span></div><div class="line">                        <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">                    pointer += <span class="number">1</span></div><div class="line">                <span class="keyword">else</span>:</div><div class="line">                    <span class="comment"># print "right True"</span></div><div class="line">                    <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">                    </div><div class="line">        <span class="function"><span class="keyword">def</span> <span class="title">recursive</span><span class="params">(pre_visited, in_visited, preorder, inorder, current_node, pre_index)</span>:</span></div><div class="line">            in_index = inorder.index(preorder[pre_index])</div><div class="line">        <span class="comment">#    if pre_index &gt;= len(preorder)+1:</span></div><div class="line">                <span class="comment">#return None</span></div><div class="line">            pre_visited[pre_index] = <span class="number">1</span></div><div class="line">            in_visited[in_index] = <span class="number">1</span></div><div class="line">            current_node.val = preorder[pre_index] </div><div class="line">            <span class="comment"># print "recursive[", pre_index,"]:in_visited", in_visited, ":pre_visited:" ,pre_visited</span></div><div class="line">            <span class="keyword">if</span> hasZero(<span class="string">"left"</span>, in_visited, in_index):</div><div class="line">                <span class="comment">#there are some un-visited nodes left</span></div><div class="line">                <span class="keyword">try</span>:</div><div class="line">                    next_index = pre_visited.index(<span class="number">0</span>)</div><div class="line">                <span class="keyword">except</span> ValueError:</div><div class="line">                    <span class="keyword">assert</span>(<span class="keyword">True</span>)</div><div class="line">                <span class="keyword">else</span>:</div><div class="line">                    <span class="comment"># print "[",pre_index,"] -&gt; left"</span></div><div class="line">                    current_node.left = TreeNode(<span class="keyword">None</span>)</div><div class="line">                    recursive(pre_visited,in_visited,preorder,inorder,current_node.left,next_index)</div><div class="line">            <span class="keyword">if</span> hasZero(<span class="string">"right"</span>, in_visited, in_index):</div><div class="line">                <span class="comment">#there are some un-visited nodes right</span></div><div class="line">                <span class="keyword">try</span>:</div><div class="line">                    next_index = pre_visited.index(<span class="number">0</span>)</div><div class="line">                <span class="keyword">except</span> ValueError:</div><div class="line">                    <span class="keyword">assert</span>(<span class="keyword">True</span>)</div><div class="line">                <span class="keyword">else</span>:</div><div class="line">                    <span class="comment"># print "[",pre_index,"] -&gt; right"</span></div><div class="line">                    current_node.right = TreeNode(<span class="keyword">None</span>)</div><div class="line">                    recursive(pre_visited,in_visited,preorder,inorder,current_node.right,next_index)</div><div class="line">            <span class="comment"># print "leaf.val", current_node.val</span></div><div class="line">            <span class="keyword">return</span></div><div class="line">        <span class="keyword">if</span> inorder <span class="keyword">in</span>  [<span class="keyword">None</span>, [], &#123;&#125;]:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">None</span></div><div class="line">        <span class="keyword">if</span> preorder <span class="keyword">in</span>  [<span class="keyword">None</span>, [], &#123;&#125;]:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">None</span></div><div class="line">        root_node = TreeNode(<span class="keyword">None</span>)</div><div class="line">        pre_visited = [<span class="number">0</span>]*len(preorder)</div><div class="line">        in_visited = [<span class="number">0</span>]*len(inorder)</div><div class="line">        recursive(pre_visited,in_visited,preorder,inorder,root_node,<span class="number">0</span>)</div><div class="line">        <span class="keyword">return</span> root_node</div></pre></td></tr></table></figure>
</div><footer class="post__foot u-cf"><a href="/2015/06/07/Construct-Binary-Tree-from-Preorder-and-Inorder-Traversal/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-06-03T22:00:00.000Z" class="post__time">June 4, 2015</time><h1 class="post__title"><a href="/2015/06/04/Symmetric-Tree/">leetcode, 判断对称二叉树</a></h1></header><div class="post__main echo"><p> 题目:</p>
<blockquote>
<p><strong>Symmetric Tree</strong></p>
<p>Given a binary tree, check whether it is a mirror of itself (ie, symmetric around its center).</p>
<p>For example, this binary tree is symmetric:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">    1</div><div class="line">   / \</div><div class="line">  2   2</div><div class="line">/ \ / \</div><div class="line">3  4 4  3</div></pre></td></tr></table></figure>
<p>But the following is not:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">    1</div><div class="line">   / \</div><div class="line">  2   2</div><div class="line">   \   \</div><div class="line">   3    3</div><div class="line">``` </div><div class="line"></div><div class="line">&gt;Note:</div><div class="line">&gt;Bonus points if you could solve it both recursively and iteratively.</div><div class="line"> </div><div class="line">&gt;confused what &quot;&#123;1,#,2,3&#125;&quot; means? &gt; read more on how binary tree is serialized on OJ.</div><div class="line"> </div><div class="line">&gt;OJ&apos;s Binary Tree Serialization:</div><div class="line"> </div><div class="line">&gt;The serialization of a binary tree follows a level order traversal, where &apos;#&apos; signifies a path terminator where no node exists below.</div><div class="line"> </div><div class="line">&gt;Here&apos;s an example:</div><div class="line"> &gt;</div></pre></td></tr></table></figure>
</blockquote>
<p>   1<br>  / \<br> 2   3<br>    /<br>   4<br>    \<br>     5<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&gt;The above binary tree is serialized as `&#123;1,2,3,#,#,4,#,#,5&#125;`. </div><div class="line"></div><div class="line">刚刚看的时候觉得挺难得, 应该, 因为你看对称啊什么的很难解决,</div><div class="line"></div><div class="line">后来看到这个OJ的二叉树表示法的提示之后就想诶能不能通过吧二叉树转化为列表然后比较列表是否对称就行了啊</div><div class="line"></div><div class="line">说起二叉树转化成列表就又想到了**前序, 中序, 后序**遍历</div><div class="line"></div><div class="line">比如前序遍历, 它的遍历方法是`根-&gt;左-&gt;右`</div><div class="line"></div><div class="line">所以如果是镜像二叉树的话, 前序遍历的结果应该是相当于原始二叉树的`根-&gt;右-&gt;左`</div><div class="line"></div><div class="line">所以如果</div><div class="line"></div><div class="line">原始二叉树: `根-&gt;左-&gt;右`遍历</div><div class="line">镜像二叉树: `根-&gt;右-&gt;左`遍历</div><div class="line"></div><div class="line">他们分别得到的列表应该是相同的. </div><div class="line">就用这个来判断</div><div class="line"></div><div class="line">提交的时候发现不能完全用教科书上的遍历方法</div><div class="line"></div><div class="line">因为有这个case:</div><div class="line"></div><div class="line">`[1,2,2,null,3,null,3]`</div><div class="line"></div><div class="line">就是这样的树</div></pre></td></tr></table></figure></p>
<pre><code>1
</code></pre><p>   /   \<br>  2    2<br> /  \ /  \</p>
<h1 id="3-3"><a href="#3-3" class="headerlink" title="3 #   3"></a>3 #   3</h1><p>(# == null)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">所以也要把空的子节点记录下来</div><div class="line"></div><div class="line"></div><div class="line">最后A过的python代码如下</div><div class="line"></div><div class="line">```python</div><div class="line"># Definition for a binary tree node.</div><div class="line"># class TreeNode:</div><div class="line">#     def __init__(self, x):</div><div class="line">#         self.val = x</div><div class="line">#         self.left = None</div><div class="line">#         self.right = None</div><div class="line">class Solution:</div><div class="line">    # @param &#123;TreeNode&#125; root</div><div class="line">    # @return &#123;boolean&#125;</div><div class="line">    def isSymmetric(self, root):</div><div class="line">        def preorder_left_first(node):</div><div class="line">            ret=[];</div><div class="line">            if node == None:</div><div class="line">                return [None]</div><div class="line">            ret.append(node.val)</div><div class="line">            ret = ret + preorder_left_first(node.left)</div><div class="line">            ret = ret + preorder_left_first(node.right)</div><div class="line">            return ret</div><div class="line">        def preorder_right_first(node):</div><div class="line">            ret=[];</div><div class="line">            if node == None:</div><div class="line">                return [None]</div><div class="line">            ret.append(node.val)</div><div class="line">            ret = ret + preorder_right_first(node.right)</div><div class="line">            ret = ret + preorder_right_first(node.left)</div><div class="line">            return ret</div><div class="line">        # logic start here</div><div class="line">        if root in [None,[],&#123;&#125;]:</div><div class="line">            return True</div><div class="line">        if (root.left == None and root.right == None):</div><div class="line">            return True</div><div class="line">        if root.left == None or root.right == None:</div><div class="line">            return False</div><div class="line">        left_root = root.left</div><div class="line">        right_root = root.right</div><div class="line">        if left_root.val != right_root.val:</div><div class="line">            return False</div><div class="line">        else:</div><div class="line">            right_ret= preorder_right_first(right_root)</div><div class="line">            left_ret = preorder_left_first(left_root)</div><div class="line">            if right_ret == left_ret:</div><div class="line">                return True</div><div class="line">            else:</div><div class="line">                return False</div></pre></td></tr></table></figure></p>
</div><footer class="post__foot u-cf"><a href="/2015/06/04/Symmetric-Tree/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-06-02T22:00:00.000Z" class="post__time">June 3, 2015</time><h1 class="post__title"><a href="/2015/06/03/post-order-Traversal-of-btree/">leetcode, 非递归, 实现后序遍历二叉树</a></h1></header><div class="post__main echo"><p>题目:</p>
<blockquote>
<p><strong>Binary Tree Postorder Traversal</strong> </p>
<p>Given a binary tree, return the postorder traversal of its nodes’ values.</p>
<p>For example:<br>Given binary tree {1,#,2,3},</p>
<p> 1<br>   \<br>   2<br>   /<br>  3</p>
<p>return [3,2,1].</p>
<p>Note: Recursive solution is trivial, could you do it iteratively?</p>
</blockquote>
<p>这个问题貌似是一个挺经典的面试题</p>
<p>先要搞清楚后序遍历是什么</p>
<blockquote>
<p>先遍历左节点, 然后右节点, 最后根节点</p>
</blockquote>
<p>百度百科里面的递归算法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> btnode</div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> d;</div><div class="line">    <span class="keyword">struct</span> btnode *lchild;</div><div class="line">    <span class="keyword">struct</span> btnode *rchild;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">postrav</span><span class="params">(<span class="keyword">struct</span> btnode *bt)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span>(bt!=<span class="literal">NULL</span>)</div><div class="line">    &#123;</div><div class="line">        postrav(bt-&gt;lchild);</div><div class="line">        postrav(bt-&gt;rchild);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>,bt-&gt;d);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>思路是这样的. 虽然有点复杂</p>
<p>有两个堆栈, 一个用来存每个叶子的节点的地址 叫做: <code>pointer_stack</code>,</p>
<p> 另一个用来存这个节点是否被访问过,叫做 <code>flag_stack</code></p>
<p>其实两个堆栈的指针都是走的同一个位置…</p>
<p>把节点存入<code>pointer_stack</code>堆栈的时候, 如果这个节点被访问过的话, <code>flag_stack</code>堆栈会被相应的存入 一个 1</p>
<p>否则存入 0</p>
<p>如果没有子节点可以遍历了就弹出堆栈里面的节点继续遍历.</p>
<p>恩, 于是A过的代码是:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Definition for a binary tree node.</span></div><div class="line"><span class="comment"># class TreeNode:</span></div><div class="line"><span class="comment">#     def __init__(self, x):</span></div><div class="line"><span class="comment">#         self.val = x</span></div><div class="line"><span class="comment">#         self.left = None</span></div><div class="line"><span class="comment">#         self.right = None</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.top = <span class="number">-1</span></div><div class="line">        self.stack=[];</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">if</span> self.top  &lt; <span class="number">0</span>:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">        <span class="keyword">else</span>: </div><div class="line">            ret = self.stack[self.top]</div><div class="line">            <span class="keyword">del</span> self.stack[self.top]</div><div class="line">            self.top = self.top - <span class="number">1</span></div><div class="line">            <span class="keyword">return</span> ret</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">push</span><span class="params">(self, x)</span>:</span></div><div class="line">        self.top = self.top + <span class="number">1</span></div><div class="line">        self.stack.append(x)</div><div class="line">        <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isEmpty</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">if</span> self.top &lt; <span class="number">0</span>:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">peek</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">if</span> self.top &lt; <span class="number">0</span>:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">None</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">return</span> self.stack[self.top]</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dump</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">print</span> self.stack , <span class="string">"top:"</span>, self.top</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bottomValue</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">if</span> self.top &lt; <span class="number">0</span>:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">None</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">return</span> self.stack[<span class="number">0</span>]</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></div><div class="line">    <span class="comment"># @param &#123;TreeNode&#125; root</span></div><div class="line">    <span class="comment"># @return &#123;integer[]&#125;</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">postorderTraversal</span><span class="params">(self, root)</span>:</span></div><div class="line">        pointer_stack = Stack();</div><div class="line">        flag_stack = Stack();</div><div class="line">        ret_list=[]</div><div class="line">        <span class="keyword">if</span> root == <span class="keyword">None</span>:</div><div class="line">            <span class="keyword">return</span> []</div><div class="line">        pointer_stack.push(root)</div><div class="line">        flag_stack.push(<span class="number">0</span>)</div><div class="line">        <span class="keyword">while</span> (<span class="keyword">not</span> pointer_stack.isEmpty()):</div><div class="line">            pointer = pointer_stack.pop()</div><div class="line">            flag = flag_stack.pop()</div><div class="line">            <span class="keyword">if</span> (flag == <span class="number">0</span>):</div><div class="line">                <span class="keyword">if</span> pointer.left != <span class="keyword">None</span>:</div><div class="line">                    <span class="comment">#1. if has left child, push current position first</span></div><div class="line">                    flag_stack.push(<span class="number">1</span>) <span class="comment">#has been visited</span></div><div class="line">                    pointer_stack.push(pointer)</div><div class="line">                    <span class="comment">#1.2. if right child != None, push right child</span></div><div class="line">                    <span class="keyword">if</span> pointer.right != <span class="keyword">None</span>:</div><div class="line">                        flag_stack.push(<span class="number">0</span>)</div><div class="line">                        pointer_stack.push(pointer.right)</div><div class="line">                    <span class="comment">#1.3. push left child, due to that, left child will be visited firstly</span></div><div class="line">                    flag_stack.push(<span class="number">0</span>) </div><div class="line">                    pointer_stack.push(pointer.left)</div><div class="line">                    <span class="keyword">continue</span>;</div><div class="line">                <span class="keyword">if</span> pointer.right != <span class="keyword">None</span>:</div><div class="line">                    <span class="comment"># 2. if no left and has right, only push current position</span></div><div class="line">                    flag_stack.push(<span class="number">1</span>) <span class="comment">#has been visited</span></div><div class="line">                    pointer_stack.push(pointer)</div><div class="line">                    <span class="comment"># 2.1 push right child</span></div><div class="line">                    flag_stack.push(<span class="number">0</span>) </div><div class="line">                    pointer_stack.push(pointer.right)</div><div class="line">                    <span class="keyword">continue</span>;</div><div class="line">                <span class="keyword">if</span> (pointer.left == <span class="keyword">None</span> <span class="keyword">and</span> pointer.right == <span class="keyword">None</span>):</div><div class="line">                    ret_list.append(pointer.val);</div><div class="line">            <span class="keyword">elif</span> (flag == <span class="number">1</span>):</div><div class="line">                ret_list.append(pointer.val)</div><div class="line">        <span class="keyword">return</span> ret_list</div></pre></td></tr></table></figure>
<p>看看百度百科里面的非递归算法</p>
<p>好像和我的差不多. 只不过它的二叉树的节点里面可以存储一个tag, 标记有没有被访问过</p>
<p>再<a href="http://blog.chinaunix.net/uid-7897183-id-75493.html" target="_blank" rel="external">在网上看到了另外一个不用堆栈的方法, 就是非递归,非堆栈</a>, </p>
<p>也是巧妙的构造了一个特殊的可以存储父节点的二叉树节点来做的</p>
<p>引用:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/**************************************************************</span></div><div class="line"> * $ID: PostOrderWalkOfBST.h</div><div class="line"> * $DESC: postorder walk a BST, without stack, no recursion</div><div class="line"> * $AUTHOR: rockins chen</div><div class="line"> * $DATE: Mon Sep 24 23:15:55 CST 2007</div><div class="line"> * $<span class="doctag">BUG:</span> ybc2084@163.com or</div><div class="line"> *        www.dormforce.net/blog/rockins</div><div class="line"> **************************************************************/</div><div class="line"> </div><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span>    _POST_ORDER_WALK_OF_BST_H_</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span>    _POST_ORDER_WALK_OF_BST_H_</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// BST node definition</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> _BST_NODE &#123;</div><div class="line">    <span class="keyword">void</span>    * private_data;        <span class="comment">// store private data</span></div><div class="line">    <span class="keyword">int</span>        key;</div><div class="line">    <span class="keyword">struct</span> _BST_NODE * parent;</div><div class="line">    <span class="keyword">struct</span> _BST_NODE * lchild;</div><div class="line">    <span class="keyword">struct</span> _BST_NODE * rchild;</div><div class="line">&#125; BST_NODE, *PBST_NODE;</div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// post order walk a BST</span></div><div class="line"><span class="comment">// root denotes the BST</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">int</span> <span class="title">PostOrderWalkBST</span><span class="params">(PBST_NODE root)</span></span>;</div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// find first postorder node of BST</span></div><div class="line"><span class="comment">// root denotes the BST(maybe a subtree)</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="function"><span class="keyword">static</span> PBST_NODE <span class="title">FindFirstPostOrderNodeOfBST</span><span class="params">(PBST_NODE root)</span></span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line"><span class="comment">/**************************************************************</span></div><div class="line"> * $ID: PostOrderWalkOfBST.c</div><div class="line"> * $DESC: postorder walk a bst, without stack, no recursion</div><div class="line"> * $AUTHOR: rockins chen</div><div class="line"> * $DATE: Mon Sep 24 23:17:03 CST 2007</div><div class="line"> * $<span class="doctag">BUG:</span> ybc2084@163.com or</div><div class="line"> *        www.dormforce.net/blog/rockins</div><div class="line"> **************************************************************/</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"PostOrderWalkOfBST.h"</span></span></div><div class="line"><span class="function"><span class="keyword">int</span></span></div><div class="line"><span class="title">PostOrderWalkBST</span><span class="params">(PBST_NODE root)</span></div><div class="line">&#123;</div><div class="line">    PBST_NODE curr_node;</div><div class="line">    PBST_NODE next_node;</div><div class="line">    </div><div class="line">    <span class="comment">// fist go to the first postorder node of BST</span></div><div class="line">    curr_node = FindFirstPostOrderNodeOfBST(root);</div><div class="line">    </div><div class="line">    <span class="comment">// if current node's parent is NULL, then curr_node must be root of BST, finished</span></div><div class="line">    <span class="keyword">while</span> (!curr_node-&gt;parent) &#123;</div><div class="line">    </div><div class="line">        <span class="comment">// if current node is parent node's left child and parent has no right child,</span></div><div class="line">        <span class="comment">// then parent is next node to visit</span></div><div class="line">        <span class="keyword">if</span> (curr_node-&gt;parent-&gt;lchild == curr_node &amp;&amp;</div><div class="line">            !curr_node-&gt;parent-&gt;rchild)</div><div class="line">            next_node = curr_node-&gt;parent;</div><div class="line">            </div><div class="line">        <span class="comment">// if current node is parent node's left child and parent has right child,</span></div><div class="line">        <span class="comment">// then the fist postorder node of parent's right subtree is next node to visit</span></div><div class="line">        <span class="keyword">if</span> (curr_node-&gt;parent-&gt;lchild == curr_node &amp;&amp;</div><div class="line">            curr_node-&gt;parent-&gt;rchild)</div><div class="line">            next_node = FindFirstPostOrderNodeOfBST(</div><div class="line">                            curr_node-&gt;parent-&gt;rchild);</div><div class="line">        </div><div class="line">        <span class="comment">// if current node is parent node's right child(implicitly indicate parent node is not null),</span></div><div class="line">        <span class="comment">// then parent node is just next node</span></div><div class="line">        <span class="keyword">if</span> (curr_node-&gt;parent-&gt;rchild == curr_node)</div><div class="line">            next_node = curr_node-&gt;parent;</div><div class="line">        </div><div class="line">        <span class="comment">//</span></div><div class="line">        <span class="comment">// <span class="doctag">XXX:</span> now visit curr_node, if necessary</span></div><div class="line">        <span class="comment">//</span></div><div class="line">        VisitNode(curr_node);</div><div class="line">        </div><div class="line">        <span class="comment">// step</span></div><div class="line">        curr_node = next_node;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// find fist postorder node of BST</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="function"><span class="keyword">static</span> PBST_NODE</span></div><div class="line"><span class="title">FindFirstPostOrderNodeOfBST</span><span class="params">(PBST_NODE root)</span></div><div class="line">&#123;</div><div class="line">    PBST_NODE pNode;</div><div class="line">    </div><div class="line">    pNode = root;</div><div class="line">    </div><div class="line">    <span class="keyword">while</span> (pNode-&gt;lchild || pNode-&gt;rchild) &#123;</div><div class="line">        <span class="keyword">if</span> (pNode-&gt;lchild)</div><div class="line">            pNode = pNode-&gt;lchild;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (pNode-&gt;rchild)</div><div class="line">            pNode = pNode-&gt;rchild;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> (pNode);</div><div class="line">&#125;</div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// virtual visiting pNode, do nothing</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span></span></div><div class="line"><span class="title">VisitNode</span><span class="params">(PBST_NODE pNode)</span></div><div class="line">&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</div><footer class="post__foot u-cf"><a href="/2015/06/03/post-order-Traversal-of-btree/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-05-31T22:00:00.000Z" class="post__time">June 1, 2015</time><h1 class="post__title"><a href="/2015/06/01/about-power-algorithm/">leetcode, 二分求幂实现pow函数</a></h1></header><div class="post__main echo"><p>###实现二分求幂</p>
<p>题目:</p>
<blockquote>
<p>Pow(x, n) </p>
<p>Implement pow(x, n).</p>
</blockquote>
<p>简单粗暴的只用实现求幂函数pow(x,n)</p>
<p>其实网上有一篇挺好的文章:</p>
<p>[<a href="http://blog.jobbole.com/74468/" target="_blank" rel="external">http://blog.jobbole.com/74468/</a>]</p>
<p>英文版:</p>
<p>[<a href="http://videlalvaro.github.io/2014/03/the-power-algorithm.html" target="_blank" rel="external">http://videlalvaro.github.io/2014/03/the-power-algorithm.html</a>]</p>
<p>A过的代码如下:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">myPow</span><span class="params">(self, x, n)</span>:</span></div><div class="line">		y=<span class="number">1</span></div><div class="line">		<span class="keyword">if</span> n &lt; <span class="number">0</span>:</div><div class="line">			index = -n</div><div class="line">		<span class="keyword">else</span>:</div><div class="line">			index = n</div><div class="line">		<span class="keyword">while</span> (<span class="number">1</span>):</div><div class="line">			ret = index % <span class="number">2</span> </div><div class="line">			<span class="keyword">if</span> ret == <span class="number">1</span>:</div><div class="line">				y *= x</div><div class="line">			index /= <span class="number">2</span></div><div class="line">			<span class="keyword">if</span> index==<span class="number">0</span>:</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			x *= x</div><div class="line">		<span class="keyword">if</span> n &lt; <span class="number">0</span>:</div><div class="line">			<span class="keyword">return</span> <span class="number">1</span>/y</div><div class="line">		<span class="keyword">else</span>:</div><div class="line">			<span class="keyword">return</span> y</div></pre></td></tr></table></figure>
<p>…</p>
<p>刚刚躺床上玩了半个小时手机归来.</p>
<p>试图自己阐述一遍思路:</p>
<p>原理是这样的. 比如2的6次方, 相当于3个2的2次方相乘, 或者是一个2的4次方乘以2的平方.</p>
<p>所以就可以以平方 为单位把求幂的过程分解</p>
<p>假设求x的y次方,<br>用<code>index</code> 表示 y/2 之后的整数部分的值<br>用<code>mod</code> 表示y/2 的余数</p>
<p>那么一开始的算式是:</p>
<pre><code>result = x^y
</code></pre><p>提取一个平方</p>
<pre><code>result = x^2*(x^(y/2)*x^mod) = x^2*x^(y/2)*(x^2)*x^mod
</code></pre><p>再次提取一个平方</p>
<pre><code>result = x^2*x^2*(x^(y/(2*2))*x^mod)*(x^2)*x^mod
       = (x^2)^2*x^(y/(2^2))*(x^2)^2*x^mod*x^2*x^mod
</code></pre><p>这里面就有递归迭代的意思了<br>, 所以呢. 无节操引用个别人的用递归实现的方法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> Solution </div><div class="line">&#123;</div><div class="line">   <span class="keyword">public</span>:</div><div class="line">   <span class="function"><span class="keyword">double</span> <span class="title">pow</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">int</span> n)</span> </span></div><div class="line">   &#123;</div><div class="line">       <span class="keyword">int</span> index = n;</div><div class="line">       <span class="keyword">if</span> (n == <span class="number">0</span>)</div><div class="line">           <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">       <span class="keyword">if</span> (n == <span class="number">1</span>)</div><div class="line">           <span class="keyword">return</span> x;</div><div class="line">       <span class="keyword">if</span> (n &lt; <span class="number">0</span>)</div><div class="line">           index = -n;</div><div class="line">       <span class="keyword">double</span> rev = index%<span class="number">2</span>==<span class="number">0</span> ? <span class="built_in">pow</span>(x*x, index&gt;&gt;<span class="number">1</span>) : <span class="built_in">pow</span>(x*x, index&gt;&gt;<span class="number">1</span>)*x;</div><div class="line">       <span class="keyword">if</span> (n &lt; <span class="number">0</span>)</div><div class="line">           <span class="keyword">return</span> <span class="number">1</span> / rev;</div><div class="line">       <span class="keyword">else</span></div><div class="line">           <span class="keyword">return</span> rev;</div><div class="line">   &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>另外既然是二分查找, 就可以看到二进制数和二分查找的相关性, </p>
<p>其实这个查找过程就和求二进制数是一样的</p>
<p>不断的除以二然后记录余数…直到商为0</p>
<p>所以可以用遍历幂的二进制形式的方法来解答, 继续盗代码</p>
<p>[<a href="http://blog.csdn.net/fengbingyang/article/details/12236121" target="_blank" rel="external">http://blog.csdn.net/fengbingyang/article/details/12236121</a>]</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">my_pow</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">int</span> n)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span>(n==<span class="number">0</span>)</div><div class="line">        	<span class="keyword">return</span> <span class="number">1.0</span>;</div><div class="line">	<span class="keyword">if</span>(n&lt;<span class="number">0</span>)</div><div class="line">		<span class="keyword">return</span> <span class="number">1.0</span> / <span class="built_in">pow</span>(x,-n);</div><div class="line">	<span class="keyword">double</span> ans = <span class="number">1.0</span> ;</div><div class="line">	<span class="keyword">for</span>(; n&gt;<span class="number">0</span>; x *= x, n&gt;&gt;=<span class="number">1</span>)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span>(n&amp;<span class="number">1</span>&gt;<span class="number">0</span>)</div><div class="line">			ans *= x;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ans;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>恩关于应用呢.</p>
<p>在第一篇引用的文章里面有写, 可以做方便的repeat函数用, 因为求幂运算就是不断重复一个</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">function_foo</span><span class="params">(a,b)</span>:</span></div><div class="line">	<span class="keyword">return</span> a*b</div></pre></td></tr></table></figure>
<p>的运算, 只不过传进去的是 <code>function_foo(x,x)</code></p>
<p>所以这样的算法可以降低所有repeat函数的时间复杂度到O(log(n))</p>
</div><footer class="post__foot u-cf"><a href="/2015/06/01/about-power-algorithm/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-05-27T22:00:00.000Z" class="post__time">May 28, 2015</time><h1 class="post__title"><a href="/2015/05/28/new-boring-day/">linux 用户组配置, 挂载新硬盘</a></h1></header><div class="post__main echo"><p>今天上班没事做, 一点事都没…</p>
<p>于是把自己的笔记搬上来</p>
<h3 id="建立Liunx账号"><a href="#建立Liunx账号" class="headerlink" title="建立Liunx账号"></a>建立Liunx账号</h3><p>需要在ROOT权限下执行</p>
<pre><code>useradd -m username
</code></pre><p>新建一个用户名为username的账号</p>
<pre><code>passwd username
</code></pre><p>为username用户创建密码</p>
<h3 id="Samba-服务"><a href="#Samba-服务" class="headerlink" title="Samba 服务"></a>Samba 服务</h3><p><a href="http://docs.fedoraproject.org/en-US/Fedora/21/html/System_Administrators_Guide/ch-File_and_Print_Servers.html#samba-rgs-overview" target="_blank" rel="external">Fedora Samba配置文档</a></p>
<ol>
<li><p>改/etc/samba/smb.conf 文件, 在最下面加上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[dongmwu]</div><div class="line">path = /home/dongmwu</div><div class="line">writeable = yes</div><div class="line">public = yes</div><div class="line">guest ok = no</div></pre></td></tr></table></figure>
</li>
<li><p>设置密码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">smbpasswd -a username</div></pre></td></tr></table></figure>
</li>
<li><p>重启samba服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">systemctl restart smb.service</div></pre></td></tr></table></figure>
</li>
<li><p>记住关防火墙!!!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">systemctl stop firewalld.service</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="修改用户权限"><a href="#修改用户权限" class="headerlink" title="修改用户权限"></a>修改用户权限</h3><p>用到的是<code>chgrp</code>和<code>chown</code>这两个命令</p>
<p>一开始是这样的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/home1                                               </div><div class="line"> $ ll                                                </div><div class="line">total 20K                                            </div><div class="line">drwxr-xr-x. 2 root root 4.0K May 27 10:11 dongmwu    </div><div class="line">drwx------. 2 root root  16K May 26 23:29 lost+found</div></pre></td></tr></table></figure>
<p>用 chgrp修改用户组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/home1                                                   </div><div class="line"> $ sudo chgrp -R dongmwu dongmwu                       </div><div class="line">/home1                                                   </div><div class="line"> $ ll                                                 </div><div class="line">total 20K                                                </div><div class="line">drwxr-xr-x. 2 root dongmwu 4.0K May 27 10:11 dongmwu     </div><div class="line">drwx------. 2 root root     16K May 26 23:29 lost+found</div></pre></td></tr></table></figure>
<p>用chown修改用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/home1                                                           </div><div class="line"> $ sudo chown -R dongmwu dongmwu                       [10:15:21]</div><div class="line">/home1                                                           </div><div class="line"> $ ll                                                  [10:15:27]</div><div class="line">total 20K                                                        </div><div class="line">drwxr-xr-x. 2 dongmwu dongmwu 4.0K May 27 10:11 dongmwu          </div><div class="line">drwx------. 2 root    root     16K May 26 23:29 lost+found</div></pre></td></tr></table></figure>
</div><footer class="post__foot u-cf"><a href="/2015/05/28/new-boring-day/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-05-27T22:00:00.000Z" class="post__time">May 28, 2015</time><h1 class="post__title"><a href="/2015/05/28/deleteDuplicates/">leetcode, deleteDuplicates删除重复链表</a></h1></header><div class="post__main echo"><p>问题</p>
<blockquote>
<p>Remove Duplicates from Sorted List </p>
<p>Given a sorted linked list, delete all duplicates such that each element appear only once.</p>
<p>For example,</p>
<p>Given 1-&gt;1-&gt;2, return 1-&gt;2.</p>
<p>Given 1-&gt;1-&gt;2-&gt;3-&gt;3, return 1-&gt;2-&gt;3. </p>
</blockquote>
<p>这题终于是自己搞定的了</p>
<p>一开始的时候是觉得这就是个简单的链表所以一次遍历把所有的重复的链表接上就好了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Definition for singly-linked list.</span></div><div class="line"><span class="comment"># class ListNode:</span></div><div class="line"><span class="comment">#     def __init__(self, x):</span></div><div class="line"><span class="comment">#         self.val = x</span></div><div class="line"><span class="comment">#         self.next = None</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></div><div class="line">    <span class="comment"># @param &#123;ListNode&#125; head</span></div><div class="line">    <span class="comment"># @return &#123;ListNode&#125;</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deleteDuplicates</span><span class="params">(self, head)</span>:</span></div><div class="line">        <span class="keyword">if</span> head == <span class="keyword">None</span> <span class="keyword">or</span> head == [] <span class="keyword">or</span> head == &#123;&#125;:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">None</span></div><div class="line">        tmp=head</div><div class="line">        <span class="keyword">while</span> (tmp.next != <span class="keyword">None</span>):</div><div class="line">            <span class="keyword">if</span> tmp.val == tmp.next.val:</div><div class="line">                tmp.next = tmp.next.next</div><div class="line">            <span class="keyword">if</span> tmp.next != <span class="keyword">None</span>:</div><div class="line">                tmp=tmp.next</div><div class="line">        <span class="keyword">return</span> head</div></pre></td></tr></table></figure>
<p>后来发现在[1,1,1,1,1]<br>这种重复数据的case里面会出错</p>
<p>于是重复调用了自己, 然后这样就能消除多个重复值的影响, </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Definition for singly-linked list.</span></div><div class="line"><span class="comment"># class ListNode:</span></div><div class="line"><span class="comment">#     def __init__(self, x):</span></div><div class="line"><span class="comment">#         self.val = x</span></div><div class="line"><span class="comment">#         self.next = None</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></div><div class="line">    <span class="comment"># @param &#123;ListNode&#125; head</span></div><div class="line">    <span class="comment"># @return &#123;ListNode&#125;</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deleteDuplicates</span><span class="params">(self, head)</span>:</span></div><div class="line">        <span class="keyword">if</span> head == <span class="keyword">None</span> <span class="keyword">or</span> head == [] <span class="keyword">or</span> head == &#123;&#125;:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">None</span></div><div class="line">        tmp=head</div><div class="line">        <span class="keyword">while</span> (tmp.next != <span class="keyword">None</span>):</div><div class="line">            <span class="keyword">if</span> tmp.val == tmp.next.val:</div><div class="line">                tmp.next = tmp.next.next</div><div class="line">                self.deleteDuplicates(tmp)</div><div class="line">            <span class="keyword">if</span> tmp.next != <span class="keyword">None</span>:</div><div class="line">                tmp=tmp.next</div><div class="line">        <span class="keyword">return</span> head</div></pre></td></tr></table></figure>
<p>但是这样的时间效率好低啊…</p>
<p>时间复杂度应该是O(n2), 如果没算错的话</p>
<p>看看别人的解法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">deleteDuplicates</span><span class="params">(ListNode head)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>(head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>)</div><div class="line">            <span class="keyword">return</span> head;</div><div class="line"> </div><div class="line">        ListNode prev = head;    </div><div class="line">        ListNode p = head.next;</div><div class="line"> </div><div class="line">        <span class="keyword">while</span>(p != <span class="keyword">null</span>)&#123;</div><div class="line">            <span class="keyword">if</span>(p.val == prev.val)&#123;</div><div class="line">                prev.next = p.next;</div><div class="line">                p = p.next;</div><div class="line">                <span class="comment">//no change prev</span></div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                prev = p;</div><div class="line">                p = p.next; </div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> head;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>老子写的真垃圾…</p>
<p>直接通过判断是不是一样的决定指针走不走不就行了…</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Definition for singly-linked list.</span></div><div class="line"><span class="comment"># class ListNode:</span></div><div class="line"><span class="comment">#     def __init__(self, x):</span></div><div class="line"><span class="comment">#         self.val = x</span></div><div class="line"><span class="comment">#         self.next = None</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></div><div class="line">    <span class="comment"># @param &#123;ListNode&#125; head</span></div><div class="line">    <span class="comment"># @return &#123;ListNode&#125;</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deleteDuplicates</span><span class="params">(self, head)</span>:</span></div><div class="line">        <span class="keyword">if</span> head == <span class="keyword">None</span> <span class="keyword">or</span> head == [] <span class="keyword">or</span> head == &#123;&#125;:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">None</span></div><div class="line">        tmp=head</div><div class="line">        <span class="keyword">while</span> (tmp.next != <span class="keyword">None</span>):</div><div class="line">            <span class="keyword">if</span> tmp.val == tmp.next.val:</div><div class="line">                tmp.next = tmp.next.next</div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                tmp=tmp.next</div><div class="line">        <span class="keyword">return</span> head</div></pre></td></tr></table></figure>
<p>运行时间一下从快700ms降到了80多ms</p>
<p>!!!!</p>
</div><footer class="post__foot u-cf"><a href="/2015/05/28/deleteDuplicates/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2016 Dongmin Wu</div><menu class="page-menu u-fr"><li class="page-menu__item"><span title="Previous" class="page-menu__link icon-arrow-left page-menu__link--disabled"></span></li><li class="page-menu__item"><a title="Next" href="/page/2/" class="page-menu__link icon-arrow-right"></a></li></menu></footer></body></html>